<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Mine Çetinkaya-Rundel and Johanna Hardin">
<title>4&nbsp; Exploring categorical data – Introduction to Modern Statistics (2e)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./explore-numerical.html" rel="next">
<link href="./exploratory-data-analysis.html" rel="prev">
<link href="./images/openintro.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-8a1e4e1f50195b9aeca4c6bdbbd0ae67.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-1c2ce5d4ac9f5b6ea71624de97bf760e.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-8a1e4e1f50195b9aeca4c6bdbbd0ae67.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-41ebc7e69ef0285b0c3541b9cc726a5c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-790f3f5e7e2e01ab58e527b05f631cee.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-41ebc7e69ef0285b0c3541b9cc726a5c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://hypothes.is/embed.js"></script><script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="site_libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet">
<script src="site_libs/bsTable-3.3.7/bootstrapTable.js"></script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./exploratory-data-analysis.html">Exploratory data analysis</a></li><li class="breadcrumb-item"><a href="./explore-categorical.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploring categorical data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Modern Statistics (2e)</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/openintrostat/ims/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome to IMS2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Authors</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./introduction-to-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-hello.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Hello data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Study design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Applications: Data</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./exploratory-data-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exploratory data analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./explore-categorical.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploring categorical data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./explore-numerical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exploring numerical data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./explore-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Applications: Explore</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./regression-modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model-slr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Linear regression with a single predictor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model-mlr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Linear regression with multiple predictors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model-logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Logistic regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Applications: Model</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./foundations-of-inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations of inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foundations-randomization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Hypothesis testing with randomization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foundations-bootstrapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Confidence intervals with bootstrapping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foundations-mathematical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Inference with mathematical models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foundations-errors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Decision Errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foundations-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Applications: Foundations</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./statistical-inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-one-prop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Inference for a single proportion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-two-props.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Inference for comparing two proportions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Inference for two-way tables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-one-mean.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Inference for a single mean</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-two-means.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Inference for comparing two independent means</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-paired-means.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Inference for comparing paired means</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-many-means.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Inference for comparing many means</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Applications: Infer</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./inferential-modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inferential modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inf-model-slr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Inference for linear regression with a single predictor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inf-model-mlr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Inference for linear regression with multiple predictors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inf-model-logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Inference for logistic regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inf-model-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Applications: Model and infer</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Exercise solutions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#contingency-tables-and-bar-plots" id="toc-contingency-tables-and-bar-plots" class="nav-link active" data-scroll-target="#contingency-tables-and-bar-plots"><span class="header-section-number">4.1</span> Contingency tables and bar plots</a></li>
  <li>
<a href="#visualizing-two-categorical-variables" id="toc-visualizing-two-categorical-variables" class="nav-link" data-scroll-target="#visualizing-two-categorical-variables"><span class="header-section-number">4.2</span> Visualizing two categorical variables</a>
  <ul class="collapse">
<li><a href="#bar-plots-with-two-variables" id="toc-bar-plots-with-two-variables" class="nav-link" data-scroll-target="#bar-plots-with-two-variables"><span class="header-section-number">4.2.1</span> Bar plots with two variables</a></li>
  <li><a href="#mosaic-plots" id="toc-mosaic-plots" class="nav-link" data-scroll-target="#mosaic-plots"><span class="header-section-number">4.2.2</span> Mosaic plots</a></li>
  </ul>
</li>
  <li><a href="#row-and-column-proportions" id="toc-row-and-column-proportions" class="nav-link" data-scroll-target="#row-and-column-proportions"><span class="header-section-number">4.3</span> Row and column proportions</a></li>
  <li><a href="#pie-charts" id="toc-pie-charts" class="nav-link" data-scroll-target="#pie-charts"><span class="header-section-number">4.4</span> Pie charts</a></li>
  <li><a href="#waffle-charts" id="toc-waffle-charts" class="nav-link" data-scroll-target="#waffle-charts"><span class="header-section-number">4.5</span> Waffle charts</a></li>
  <li><a href="#comparing-numerical-data-across-groups" id="toc-comparing-numerical-data-across-groups" class="nav-link" data-scroll-target="#comparing-numerical-data-across-groups"><span class="header-section-number">4.6</span> Comparing numerical data across groups</a></li>
  <li>
<a href="#sec-chp4-review" id="toc-sec-chp4-review" class="nav-link" data-scroll-target="#sec-chp4-review"><span class="header-section-number">4.7</span> Chapter review</a>
  <ul class="collapse">
<li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">4.7.1</span> Summary</a></li>
  <li><a href="#terms" id="toc-terms" class="nav-link" data-scroll-target="#terms"><span class="header-section-number">4.7.2</span> Terms</a></li>
  </ul>
</li>
  <li><a href="#sec-chp4-exercises" id="toc-sec-chp4-exercises" class="nav-link" data-scroll-target="#sec-chp4-exercises"><span class="header-section-number">4.8</span> Exercises</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/openintrostat/ims/edit/main/explore-categorical.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/openintrostat/ims/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./exploratory-data-analysis.html">Exploratory data analysis</a></li><li class="breadcrumb-item"><a href="./explore-categorical.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploring categorical data</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-explore-categorical" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploring categorical data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><div class="chapterintro">
<p>This chapter focuses on exploring <strong>categorical</strong> data using summary statistics and visualizations. The summaries and graphs presented in this chapter are created using statistical software; however, since this might be your first exposure to the concepts, we take our time in this chapter to detail how to create them. Where possible, we present multivariate plots; plots that visualize the relationship between multiple variables. Mastery of the content presented in this chapter will be crucial for understanding the methods and techniques introduced in the rest of the book.</p>
</div>
<p>In this chapter we will work with data on loans from Lending Club that you’ve previously seen in <a href="data-hello.html" class="quarto-xref"><span>Chapter 1</span></a>. The <code>loan50</code> dataset from <a href="data-hello.html" class="quarto-xref"><span>Chapter 1</span></a> represents a sample from a larger loan dataset called <code>loans</code>. This larger dataset contains information on 10,000 loans made through Lending Club. We will examine the relationship between <code>homeownership</code>, which for the <code>loans</code> data can take a value of <code>rent</code>, <code>mortgage</code> (owns but has a mortgage), or <code>own</code>, and <code>application_type</code>, which indicates whether the loan application was made with a partner or whether it was an individual application.</p>
<div class="data">
<p>The <a href="http://openintrostat.github.io/openintro/reference/loans_full_schema.html"><code>loans_full_schema</code></a> data can be found in the <a href="http://openintrostat.github.io/openintro"><strong>openintro</strong></a> R package. Based on the data in this dataset we have modified the <code>homeownership</code> and <code>application_type</code> variables. We will refer to this modified dataset as <code>loans</code>.</p>
</div>
<section id="contingency-tables-and-bar-plots" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="contingency-tables-and-bar-plots">
<span class="header-section-number">4.1</span> Contingency tables and bar plots</h2>
<p><a href="#tbl-loan-home-app-type-totals" class="quarto-xref">Table&nbsp;<span>4.1</span></a> summarizes two variables: <code>application_type</code> and <code>homeownership</code>. Note that loans from Lending Club are typically for small items or for cash, not for homes. The individuals in the dataset are taking out loans for their personal use, and we categorize them based on their <code>homeownership</code> status (which is unrelated to the purpose of the loan). A table that summarizes data for two categorical variables in this way is called a <strong>contingency table</strong>. Each value in the table represents the number of times a particular combination of variable outcomes occurred.</p>
<p>For example, the value 3496 corresponds to the number of loans in the dataset where the borrower rents their home and the application type was by an individual. Row and column totals are also included. The <strong>row totals</strong> provide the total counts across each row and the <strong>column totals</strong> down each column. We can also create a table that shows only the overall percentages or proportions for each combination of categories, or we can create a table for a single variable, such as the one shown in <a href="#tbl-loan-homeownership-totals" class="quarto-xref">Table&nbsp;<span>4.2</span></a> for the <code>homeownership</code> variable.</p>
<div class="cell" data-tbl-pos="H">
<div id="tbl-loan-home-app-type-totals" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-loan-home-app-type-totals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.1: A contingency table for application type and homeownership.
</figcaption><div aria-describedby="tbl-loan-home-app-type-totals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped table-condensed do-not-create-environment cell caption-top table-sm small">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; empty-cells: hide; border-bottom: hidden;"></th>
<th colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
homeownership
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: right; empty-cells: hide; border-bottom: hidden;"></th>
</tr>
<tr class="even">
<th style="text-align: left;" data-quarto-table-cell-role="th">application_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mortgage</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">own</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; width: 8em;">joint</td>
<td style="text-align: right; width: 5em;">362</td>
<td style="text-align: right; width: 5em;">950</td>
<td style="text-align: right; width: 5em;">183</td>
<td style="text-align: right; width: 5em;">1495</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 8em;">individual</td>
<td style="text-align: right; width: 5em;">3496</td>
<td style="text-align: right; width: 5em;">3839</td>
<td style="text-align: right; width: 5em;">1170</td>
<td style="text-align: right; width: 5em;">8505</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 8em;">Total</td>
<td style="text-align: right; width: 5em;">3858</td>
<td style="text-align: right; width: 5em;">4789</td>
<td style="text-align: right; width: 5em;">1353</td>
<td style="text-align: right; width: 5em;">10000</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="cell" data-tbl-pos="H">
<div id="tbl-loan-homeownership-totals" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-loan-homeownership-totals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.2: A table summarizing the frequencies for each value of the homeownership variable – mortgage, own, and rent.
</figcaption><div aria-describedby="tbl-loan-homeownership-totals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped table-condensed do-not-create-environment cell caption-top table-sm small">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">homeownership</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left; width: 10em;">rent</td>
<td style="text-align: right; width: 10em;">3858</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 10em;">mortgage</td>
<td style="text-align: right; width: 10em;">4789</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 10em;">own</td>
<td style="text-align: right; width: 10em;">1353</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 10em;">Total</td>
<td style="text-align: right; width: 10em;">10000</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>A bar plot is a common way to display a single categorical variable. <a href="#fig-loan-homeownership-bar-plot-1" class="quarto-xref">Figure&nbsp;<span>4.1 (a)</span></a> displays a <strong>bar plot</strong> of the <code>homeownership</code> variable. In <a href="#fig-loan-homeownership-bar-plot-2" class="quarto-xref">Figure&nbsp;<span>4.1 (b)</span></a> the counts are converted into proportions, showing the proportion of observations that are in each level.</p>
<div id="fig-loan-homeownership-bar-plot" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-loan-homeownership-bar-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-bar-plot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-loan-homeownership-bar-plot-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Counts and proportions of values of the homeownership variable. The highest proportion of borrowers have a home mortgage. The next highest group rents. The smallest group of people own their home outright. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-bar-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-bar-plot-1.png" class="lightbox" data-gallery="fig-loan-homeownership-bar-plot" title="Figure&nbsp;4.1&nbsp;(a): Counts of homeownership."><img src="explore-categorical_files/figure-html/fig-loan-homeownership-bar-plot-1.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-loan-homeownership-bar-plot" alt="Counts and proportions of values of the homeownership variable. The highest proportion of borrowers have a home mortgage. The next highest group rents. The smallest group of people own their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-bar-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Counts of homeownership.
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-bar-plot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-loan-homeownership-bar-plot-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Counts and proportions of values of the homeownership variable. The highest proportion of borrowers have a home mortgage. The next highest group rents. The smallest group of people own their home outright. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-bar-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-bar-plot-2.png" class="lightbox" data-gallery="fig-loan-homeownership-bar-plot" title="Figure&nbsp;4.1&nbsp;(b): Proportions of homeownership."><img src="explore-categorical_files/figure-html/fig-loan-homeownership-bar-plot-2.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-loan-homeownership-bar-plot" alt="Counts and proportions of values of the homeownership variable. The highest proportion of borrowers have a home mortgage. The next highest group rents. The smallest group of people own their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-bar-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Proportions of homeownership.
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-loan-homeownership-bar-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.1: Distribution of homeownership.
</figcaption></figure>
</div>
</section><section id="visualizing-two-categorical-variables" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="visualizing-two-categorical-variables">
<span class="header-section-number">4.2</span> Visualizing two categorical variables</h2>
<section id="bar-plots-with-two-variables" class="level3" data-number="4.2.1"><h3 data-number="4.2.1" class="anchored" data-anchor-id="bar-plots-with-two-variables">
<span class="header-section-number">4.2.1</span> Bar plots with two variables</h3>
<p>We can display the distributions of two categorical variables on a bar plot concurrently. Such plots are generally useful for visualizing the relationship between two categorical variables. <a href="#fig-loan-homeownership-app-type-bar-plot" class="quarto-xref">Figure&nbsp;<span>4.2</span></a> shows three such plots that visualize <a href="#fig-loan-homeownership-app-type-bar-plot-1" class="quarto-xref">Figure&nbsp;<span>4.2 (a)</span></a> is a <strong>stacked bar plot</strong>. This plot most clearly displays that loan applicants most commonly live in mortgaged homes. It is difficult to say, based on this plot alone, how different application types vary across the levels of homeownership. <a href="#fig-loan-homeownership-app-type-bar-plot-2" class="quarto-xref">Figure&nbsp;<span>4.2 (b)</span></a> is a <strong>standardized bar plot</strong> (also known as <strong>filled bar plot</strong>). This type of visualization is helpful in understanding the fraction of individual or joint loan applications for borrowers in each level of <code>homeownership</code>. Additionally, since the proportions of joint and individual loans vary across the groups, we can conclude that the two variables are associated for this sample. Finally, <a href="#fig-loan-homeownership-app-type-bar-plot-3" class="quarto-xref">Figure&nbsp;<span>4.2 (c)</span></a> is a <strong>dodged bar plot</strong>. This plot most clearly displays that within each level of homeownership, individual applications are more common than joint applications. This plot most clearly displays that joint applications are most common among loans for applicants who live in mortgaged homes, compared to renters and owners.</p>
<div class="cell" data-layout="[[50,50],[-22,56,-22]]">
<div id="fig-loan-homeownership-app-type-bar-plot" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-loan-homeownership-app-type-bar-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-app-type-bar-plot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-loan-homeownership-app-type-bar-plot-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Three bar plots (stacked, dodged, and standardized) displaying homeownership and application type variables. There are three or four times as many individual applications as joint applications. The highest proportion of borrowers has a home mortgage. The next highest group rents. The smallest group of people own their home outright. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-app-type-bar-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-app-type-bar-plot-1.png" class="lightbox" data-gallery="fig-loan-homeownership-app-type-bar-plot" title="Figure&nbsp;4.2&nbsp;(a): Stacked bar plot"><img src="explore-categorical_files/figure-html/fig-loan-homeownership-app-type-bar-plot-1.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-loan-homeownership-app-type-bar-plot" alt="Three bar plots (stacked, dodged, and standardized) displaying homeownership and application type variables. There are three or four times as many individual applications as joint applications. The highest proportion of borrowers has a home mortgage. The next highest group rents. The smallest group of people own their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-app-type-bar-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Stacked bar plot
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-app-type-bar-plot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-loan-homeownership-app-type-bar-plot-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Three bar plots (stacked, dodged, and standardized) displaying homeownership and application type variables. There are three or four times as many individual applications as joint applications. The highest proportion of borrowers has a home mortgage. The next highest group rents. The smallest group of people own their home outright. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-app-type-bar-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-app-type-bar-plot-2.png" class="lightbox" data-gallery="fig-loan-homeownership-app-type-bar-plot" title="Figure&nbsp;4.2&nbsp;(b): Standardized bar plot"><img src="explore-categorical_files/figure-html/fig-loan-homeownership-app-type-bar-plot-2.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-loan-homeownership-app-type-bar-plot" alt="Three bar plots (stacked, dodged, and standardized) displaying homeownership and application type variables. There are three or four times as many individual applications as joint applications. The highest proportion of borrowers has a home mortgage. The next highest group rents. The smallest group of people own their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-app-type-bar-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Standardized bar plot
</figcaption></figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 22.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-app-type-bar-plot" style="flex-basis: 56.0%;justify-content: flex-start;">
<div id="fig-loan-homeownership-app-type-bar-plot-3" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Three bar plots (stacked, dodged, and standardized) displaying homeownership and application type variables. There are three or four times as many individual applications as joint applications. The highest proportion of borrowers has a home mortgage. The next highest group rents. The smallest group of people own their home outright. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-app-type-bar-plot-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-app-type-bar-plot-3.png" class="lightbox" data-gallery="fig-loan-homeownership-app-type-bar-plot" title="Figure&nbsp;4.2&nbsp;(c): Dodged bar plot"><img src="explore-categorical_files/figure-html/fig-loan-homeownership-app-type-bar-plot-3.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-loan-homeownership-app-type-bar-plot" alt="Three bar plots (stacked, dodged, and standardized) displaying homeownership and application type variables. There are three or four times as many individual applications as joint applications. The highest proportion of borrowers has a home mortgage. The next highest group rents. The smallest group of people own their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-app-type-bar-plot-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Dodged bar plot
</figcaption></figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 22.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-loan-homeownership-app-type-bar-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.2: Three bar plots displaying homeownership and application type variables.
</figcaption></figure>
</div>
</div>
<div class="workedexample">
<p>Examine the three bar plots in <a href="#fig-loan-homeownership-app-type-bar-plot" class="quarto-xref">Figure&nbsp;<span>4.2</span></a>. When is the stacked, dodged, or standardized bar plot the most useful?</p>
<hr>
<p>The stacked bar plot is most useful when it’s reasonable to assign one variable as the explanatory variable (here <code>homeownership</code>) and the other variable as the response (here <code>application_type</code>) since we are effectively grouping by one variable first and then breaking it down by the others.</p>
<p>Dodged bar plots are more agnostic in their display about which variable, if any, represents the explanatory and which the response variable. It is also easy to discern the number of cases in each of the six different group combinations. However, one downside is that it tends to require more horizontal space; the narrowness of Plot B compared to the other two in <a href="#fig-loan-homeownership-app-type-bar-plot" class="quarto-xref">Figure&nbsp;<span>4.2</span></a> makes the plot feel a bit cramped. Additionally, when two groups are of very different sizes, as we see in the group <code>own</code> relative to either of the other two groups, it is difficult to discern if there is an association between the variables.</p>
<p>The standardized stacked bar plot is helpful if the primary variable in the stacked bar plot is relatively imbalanced, e.g., the category has only a third of the observations in the category, making the simple stacked bar plot less useful for checking for an association. The major downside of the standardized version is that we lose all sense of how many cases each of the bars represents.</p>
</div>
</section><section id="mosaic-plots" class="level3" data-number="4.2.2"><h3 data-number="4.2.2" class="anchored" data-anchor-id="mosaic-plots">
<span class="header-section-number">4.2.2</span> Mosaic plots</h3>
<p>A <strong>mosaic plot</strong> is a visualization technique suitable for contingency tables that resembles a standardized stacked bar plot with the benefit that we still see the relative group sizes of the primary variable as well.</p>
<p>To get started in creating our first mosaic plot, we’ll break a square into columns for each category of the variable, with the result shown in <a href="#fig-loan-homeownership-type-mosaic-plot-1" class="quarto-xref">Figure&nbsp;<span>4.3 (a)</span></a>. Each column represents a level of <code>homeownership</code>, and the column widths correspond to the proportion of loans in each of those categories. For instance, there are fewer loans where the borrower is an owner than where the borrower has a mortgage. In general, mosaic plots use box <em>areas</em> to represent the number of cases in each category.</p>
<p><a href="#fig-loan-homeownership-type-mosaic-plot-2" class="quarto-xref">Figure&nbsp;<span>4.3 (b)</span></a> displays the relationship between homeownership and application type. Each column is split proportionally to the number of loans from individual and joint borrowers. For example, the second column represents loans where the borrower has a mortgage, and it was divided into individual loans (upper) and joint loans (lower). As another example, the bottom segment of the third column represents loans where the borrower owns their home and applied jointly, while the upper segment of this column represents borrowers who are homeowners and filed individually. We can again use this plot to see that the <code>homeownership</code> and <code>application_type</code> variables are associated, since some columns are divided in different vertical locations than others, which was the same technique used for checking an association in the standardized stacked bar plot.</p>
<div id="fig-loan-homeownership-type-mosaic-plot" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-loan-homeownership-type-mosaic-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-type-mosaic-plot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-loan-homeownership-type-mosaic-plot-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Two mosaic plots, one for homeownership alone and the other displaying the relationship between homeownership and application type. Again, the majority of borrowers are individuals, as compared with joint applications. The highest proportion of borrowers have a mortgage; the next highest proportion rent their home; and the smallest group owns their home outright. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-type-mosaic-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-type-mosaic-plot-1.png" class="lightbox" data-gallery="fig-loan-homeownership-type-mosaic-plot" title="Figure&nbsp;4.3&nbsp;(a): Homeownership."><img src="explore-categorical_files/figure-html/fig-loan-homeownership-type-mosaic-plot-1.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-loan-homeownership-type-mosaic-plot" alt="Two mosaic plots, one for homeownership alone and the other displaying the relationship between homeownership and application type. Again, the majority of borrowers are individuals, as compared with joint applications. The highest proportion of borrowers have a mortgage; the next highest proportion rent their home; and the smallest group owns their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-type-mosaic-plot-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Homeownership.
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-type-mosaic-plot" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-loan-homeownership-type-mosaic-plot-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Two mosaic plots, one for homeownership alone and the other displaying the relationship between homeownership and application type. Again, the majority of borrowers are individuals, as compared with joint applications. The highest proportion of borrowers have a mortgage; the next highest proportion rent their home; and the smallest group owns their home outright. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-type-mosaic-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-type-mosaic-plot-2.png" class="lightbox" data-gallery="fig-loan-homeownership-type-mosaic-plot" title="Figure&nbsp;4.3&nbsp;(b): Homeownership vs.&nbsp;application type."><img src="explore-categorical_files/figure-html/fig-loan-homeownership-type-mosaic-plot-2.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-loan-homeownership-type-mosaic-plot" alt="Two mosaic plots, one for homeownership alone and the other displaying the relationship between homeownership and application type. Again, the majority of borrowers are individuals, as compared with joint applications. The highest proportion of borrowers have a mortgage; the next highest proportion rent their home; and the smallest group owns their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-type-mosaic-plot-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Homeownership vs.&nbsp;application type.
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-loan-homeownership-type-mosaic-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.3: Two mosaic plots, one for homeownership alone and the other displaying the relationship between homeownership and application type.
</figcaption></figure>
</div>
<p>In <a href="#fig-loan-homeownership-type-mosaic-plot" class="quarto-xref">Figure&nbsp;<span>4.3</span></a>, we chose to first split by the homeowner status of the borrower. However, we could have instead first split by the application type, as in <a href="#fig-loan-app-type-mosaic-plot" class="quarto-xref">Figure&nbsp;<span>4.4</span></a>. Like with the bar plots, it’s common to use the explanatory variable to represent the first split in a mosaic plot, and then for the response to break up each level of the explanatory variable if these labels are reasonable to attach to the variables under consideration.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-loan-app-type-mosaic-plot" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Mosaic plot where loans are grouped by homeownership after they have been divided into individual and joint application types. Again, the majority of borrowers are individuals, as compared with joint applications. The highest proportion of borrowers have a mortgage; the next highest proportion rent their home; and the smallest group owns their home outright. ">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-loan-app-type-mosaic-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-app-type-mosaic-plot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Figure&nbsp;4.4: Mosaic plot where loans are grouped by homeownership after they have been divided into individual and joint application types."><img src="explore-categorical_files/figure-html/fig-loan-app-type-mosaic-plot-1.png" class="img-fluid figure-img" style="width:90.0%" alt="Mosaic plot where loans are grouped by homeownership after they have been divided into individual and joint application types. Again, the majority of borrowers are individuals, as compared with joint applications. The highest proportion of borrowers have a mortgage; the next highest proportion rent their home; and the smallest group owns their home outright. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-loan-app-type-mosaic-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.4: Mosaic plot where loans are grouped by homeownership after they have been divided into individual and joint application types.
</figcaption></figure>
</div>
</div>
</div>
</section></section><section id="row-and-column-proportions" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="row-and-column-proportions">
<span class="header-section-number">4.3</span> Row and column proportions</h2>
<p>In the previous sections we inspected visualizations of two categorical variables in bar plots and mosaic plots. However, we have not discussed how the values in the bar and mosaic plots that show proportions are calculated. In this section we will investigate fractional breakdown of one variable in another and we can modify our contingency table to provide such a view. <a href="#tbl-loan-home-app-type-row-proportions" class="quarto-xref">Table&nbsp;<span>4.3</span></a> shows <strong>row proportions</strong> for <a href="#tbl-loan-home-app-type-totals" class="quarto-xref">Table&nbsp;<span>4.1</span></a>, which are computed as the counts divided by their row totals. The value 3496 at the intersection of individual and rent is replaced by <span class="math inline">\(3496 / 8505 = 0.411,\)</span> i.e., 3496 divided by its row total, 8505. So, what does 0.411 represent? It corresponds to the proportion of individual applicants who rent.</p>
<div class="cell" data-tbl-pos="H">
<div id="tbl-loan-home-app-type-row-proportions" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-loan-home-app-type-row-proportions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.3: A contingency table with row proportions for application type and homeownership.
</figcaption><div aria-describedby="tbl-loan-home-app-type-row-proportions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped table-condensed do-not-create-environment cell caption-top table-sm small">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; empty-cells: hide; border-bottom: hidden;"></th>
<th colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
homeownership
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: right; empty-cells: hide; border-bottom: hidden;"></th>
</tr>
<tr class="even">
<th style="text-align: left;" data-quarto-table-cell-role="th">application_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mortgage</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">own</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; width: 8em;">joint</td>
<td style="text-align: right; width: 5em;">0.242</td>
<td style="text-align: right; width: 5em;">0.635</td>
<td style="text-align: right; width: 5em;">0.122</td>
<td style="text-align: right; width: 5em;">1</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 8em;">individual</td>
<td style="text-align: right; width: 5em;">0.411</td>
<td style="text-align: right; width: 5em;">0.451</td>
<td style="text-align: right; width: 5em;">0.138</td>
<td style="text-align: right; width: 5em;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>A contingency table of the <strong>column proportions</strong> is computed in a similar way, where each is computed as the count divided by the corresponding column total. <a href="#tbl-loan-home-app-type-column-proportions" class="quarto-xref">Table&nbsp;<span>4.4</span></a> shows such a table, and here the value 0.906 indicates that 90.6% of renters applied as individuals for the loan. This rate is higher compared to loans from people with mortgages (80.2%) or who own their home (86.5%). Because these rates vary between the three levels of <code>homeownership</code> (<code>rent</code>, <code>mortgage</code>, <code>own</code>), this provides evidence that <code>app_type</code> and <code>homeownership</code> variables may be associated.</p>
<div class="cell" data-tbl-pos="H">
<div id="tbl-loan-home-app-type-column-proportions" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-loan-home-app-type-column-proportions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.4: A contingency table with column proportions for application type and homeownership.
</figcaption><div aria-describedby="tbl-loan-home-app-type-column-proportions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped table-condensed do-not-create-environment cell caption-top table-sm small">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; empty-cells: hide; border-bottom: hidden;"></th>
<th colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
homeownership
</div></th>
</tr>
<tr class="even">
<th style="text-align: left;" data-quarto-table-cell-role="th">application_type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mortgage</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">own</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; width: 8em;">joint</td>
<td style="text-align: right; width: 5em;">0.094</td>
<td style="text-align: right; width: 5em;">0.198</td>
<td style="text-align: right; width: 5em;">0.135</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 8em;">individual</td>
<td style="text-align: right; width: 5em;">0.906</td>
<td style="text-align: right; width: 5em;">0.802</td>
<td style="text-align: right; width: 5em;">0.865</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 8em;">Total</td>
<td style="text-align: right; width: 5em;">1.000</td>
<td style="text-align: right; width: 5em;">1.000</td>
<td style="text-align: right; width: 5em;">1.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Row and column proportions can also be thought of as <strong>conditional proportions</strong> as they tell us about the proportion of observations in a given level of a categorical variable conditional on the level of another categorical variable.</p>
<p>We could also have checked for an association between <code>application_type</code> and <code>homeownership</code> in <a href="#tbl-loan-home-app-type-row-proportions" class="quarto-xref">Table&nbsp;<span>4.3</span></a> using row proportions. When comparing these row proportions, we would look down columns to see if the fraction of loans where the borrower rents, has a mortgage, or owns varied across the application types.</p>
<div class="guidedpractice">
<p>What does 0.451 represent in <a href="#tbl-loan-home-app-type-row-proportions" class="quarto-xref">Table&nbsp;<span>4.3</span></a>? What does 0.802 represent in <a href="#tbl-loan-home-app-type-column-proportions" class="quarto-xref">Table&nbsp;<span>4.4</span></a>?<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
</div>
<div class="guidedpractice">
<p>What does 0.122 represent in <a href="#tbl-loan-home-app-type-row-proportions" class="quarto-xref">Table&nbsp;<span>4.3</span></a>? What does 0.135 represent in <a href="#tbl-loan-home-app-type-column-proportions" class="quarto-xref">Table&nbsp;<span>4.4</span></a>?<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
</div>
<div class="workedexample">
<p>Data scientists use statistics to build email spam filters. By noting specific characteristics of an email, a data scientist may be able to classify some emails as spam or not spam with high accuracy. One such characteristic is the email format, which indicates whether an email has any HTML content, such as bolded text. We’ll focus on email format and spam status using the dataset; these variables are summarized in a contingency table in <a href="#tbl-email-count-table" class="quarto-xref">Table&nbsp;<span>4.5</span></a>. Which would be more helpful to someone hoping to classify email as spam or regular email for this table: row or column proportions?</p>
<hr>
<p>A data scientist would be interested in how the proportion of spam changes within each email format. This corresponds to column proportions: the proportion of spam in plain text emails and the proportion of spam in HTML emails. If we generate the column proportions, we can see that a higher fraction of plain text emails are spam (<span class="math inline">\(209/1195 = 17.5\%\)</span>) than compared to HTML emails (<span class="math inline">\(158/2726 = 5.8\%\)</span>). This information on its own is insufficient to classify an email as spam or not spam, as over 80% of plain text emails are not spam. Yet, when we carefully combine this information with many other characteristics, we stand a reasonable chance of being able to classify some emails as spam or not spam with confidence. This example points out that row and column proportions are not equivalent. Before settling on one form for a table, it is important to consider each to ensure that the most useful table is constructed. However, sometimes it simply isn’t clear which, if either, is more useful.</p>
</div>
<div class="data">
<p>The <a href="http://openintrostat.github.io/openintro/reference/email.html">email</a> data can be found in the <a href="http://openintrostat.github.io/openintro"><strong>openintro</strong></a> R package.</p>
</div>
<div class="cell" data-tbl-pos="H">
<div id="tbl-email-count-table" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-email-count-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.5: A contingency table for spam and format.
</figcaption><div aria-describedby="tbl-email-count-table-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped table-condensed do-not-create-environment cell caption-top table-sm small">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">spam</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HTML</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">text</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left; width: 8em;">not spam</td>
<td style="text-align: right; width: 5em;">2568</td>
<td style="text-align: right; width: 5em;">986</td>
<td style="text-align: right; width: 5em;">3554</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 8em;">spam</td>
<td style="text-align: right; width: 5em;">158</td>
<td style="text-align: right; width: 5em;">209</td>
<td style="text-align: right; width: 5em;">367</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 8em;">Total</td>
<td style="text-align: right; width: 5em;">2726</td>
<td style="text-align: right; width: 5em;">1195</td>
<td style="text-align: right; width: 5em;">3921</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="workedexample">
<p>Look back to <a href="#tbl-loan-home-app-type-row-proportions" class="quarto-xref">Table&nbsp;<span>4.3</span></a> and <a href="#tbl-loan-home-app-type-column-proportions" class="quarto-xref">Table&nbsp;<span>4.4</span></a>. Are there any obvious scenarios where one might be more useful than the other?</p>
<hr>
<p>None that we think are obvious! What is distinct about the email example is that the two loan variables do not have a clear explanatory-response variable relationship that we might hypothesize. Usually it is most useful to “condition” on the explanatory variable. For instance, in the email example, the email format was seen as a possible explanatory variable of whether the message was spam, so we would find it more interesting to compute the relative frequencies (proportions) for each email format.</p>
</div>
</section><section id="pie-charts" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="pie-charts">
<span class="header-section-number">4.4</span> Pie charts</h2>
<p>A <strong>pie chart</strong> is shown in <a href="#fig-loan-homeownership-pie-chart-1" class="quarto-xref">Figure&nbsp;<span>4.5 (a)</span></a> alongside a bar plot representing the same information in <a href="#fig-loan-homeownership-pie-chart-2" class="quarto-xref">Figure&nbsp;<span>4.5 (b)</span></a>. Pie charts can be useful for giving a high-level overview to show how a set of cases break down. However, it is also difficult to decipher certain details in a pie chart. For example, it’s not immediately obvious that there are more loans where the borrower has a mortgage than rent when looking at the pie chart, while this detail is very obvious in the bar plot.</p>
<div class="cell" data-layout="[[46,-6,46]]">
<div id="fig-loan-homeownership-pie-chart" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-loan-homeownership-pie-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-pie-chart" style="flex-basis: 46.9%;justify-content: flex-start;">
<div id="fig-loan-homeownership-pie-chart-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A pie chart and bar plot of homeownership. Both plots show that about half of the individuals taking out a loan have a mortgage. A slightly smaller group of individuals rents. The smallest group of borrowers owns their home. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-pie-chart-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-pie-chart-1.png" class="lightbox" data-gallery="fig-loan-homeownership-pie-chart" title="Figure&nbsp;4.5&nbsp;(a): Pie chart"><img src="explore-categorical_files/figure-html/fig-loan-homeownership-pie-chart-1.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-loan-homeownership-pie-chart" alt="A pie chart and bar plot of homeownership. Both plots show that about half of the individuals taking out a loan have a mortgage. A slightly smaller group of individuals rents. The smallest group of borrowers owns their home. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-pie-chart-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Pie chart
</figcaption></figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 6.1%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-homeownership-pie-chart" style="flex-basis: 46.9%;justify-content: flex-start;">
<div id="fig-loan-homeownership-pie-chart-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A pie chart and bar plot of homeownership. Both plots show that about half of the individuals taking out a loan have a mortgage. A slightly smaller group of individuals rents. The smallest group of borrowers owns their home. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-homeownership-pie-chart-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-homeownership-pie-chart-2.png" class="lightbox" data-gallery="fig-loan-homeownership-pie-chart" title="Figure&nbsp;4.5&nbsp;(b): Bar plot"><img src="explore-categorical_files/figure-html/fig-loan-homeownership-pie-chart-2.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-loan-homeownership-pie-chart" alt="A pie chart and bar plot of homeownership. Both plots show that about half of the individuals taking out a loan have a mortgage. A slightly smaller group of individuals rents. The smallest group of borrowers owns their home. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-homeownership-pie-chart-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Bar plot
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-loan-homeownership-pie-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.5: A pie chart and bar plot of homeownership.
</figcaption></figure>
</div>
</div>
<p>Pie charts can work well when the goal is to visualize a categorical variable with very few levels, and especially if each level represents a simple fraction (e.g., one-half, one-quarter, etc.). However, they can be quite difficult to read when they are used to visualize a categorical variable with many levels. For example, the pie chart <a href="#fig-loan-grade-pie-chart-1" class="quarto-xref">Figure&nbsp;<span>4.6 (a)</span></a> and the <a href="#fig-loan-grade-pie-chart-2" class="quarto-xref">Figure&nbsp;<span>4.6 (b)</span></a> both represent the distribution of loan grades (A through G). In this case, it is far easier to compare the counts of each loan grade using the bar plot than the pie chart.</p>
<div class="cell" data-layout="[[46,-6,46]]">
<div id="fig-loan-grade-pie-chart" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-loan-grade-pie-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-grade-pie-chart" style="flex-basis: 46.9%;justify-content: flex-start;">
<div id="fig-loan-grade-pie-chart-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A pie chart and a bar plot of loan grades. Both plots shows that the most frequent grades are A, B, and C. The bar plot makes it easier to count the number of loans in each grade. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-grade-pie-chart-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-grade-pie-chart-1.png" class="lightbox" data-gallery="fig-loan-grade-pie-chart" title="Figure&nbsp;4.6&nbsp;(a): Pie chart"><img src="explore-categorical_files/figure-html/fig-loan-grade-pie-chart-1.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-loan-grade-pie-chart" alt="A pie chart and a bar plot of loan grades. Both plots shows that the most frequent grades are A, B, and C. The bar plot makes it easier to count the number of loans in each grade. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-grade-pie-chart-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Pie chart
</figcaption></figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 6.1%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-grade-pie-chart" style="flex-basis: 46.9%;justify-content: flex-start;">
<div id="fig-loan-grade-pie-chart-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A pie chart and a bar plot of loan grades. Both plots shows that the most frequent grades are A, B, and C. The bar plot makes it easier to count the number of loans in each grade. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-grade-pie-chart-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-grade-pie-chart-2.png" class="lightbox" data-gallery="fig-loan-grade-pie-chart" title="Figure&nbsp;4.6&nbsp;(b): Bar plot"><img src="explore-categorical_files/figure-html/fig-loan-grade-pie-chart-2.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-loan-grade-pie-chart" alt="A pie chart and a bar plot of loan grades. Both plots shows that the most frequent grades are A, B, and C. The bar plot makes it easier to count the number of loans in each grade. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-grade-pie-chart-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Bar plot
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-loan-grade-pie-chart-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.6: A pie chart and bar plot of loan grades.
</figcaption></figure>
</div>
</div>
</section><section id="waffle-charts" class="level2" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="waffle-charts">
<span class="header-section-number">4.5</span> Waffle charts</h2>
<p>Another useful technique of visualizing categorical data is a <strong>waffle chart</strong>. Waffle charts can be used to communicate the proportion of the data that falls into each level of a categorical variable. Just like with pie charts, they work best when the number of levels represented is low. However, unlike pie charts, they can make it easier to compare proportions that represent non-simple fractions. <a href="#fig-loan-waffle-1" class="quarto-xref">Figure&nbsp;<span>4.7 (a)</span></a> is a waffle chart of homeownership and <a href="#fig-loan-waffle-2" class="quarto-xref">Figure&nbsp;<span>4.7 (b)</span></a> is a waffle chart of loan status.</p>
<div class="cell" data-layout="[[46,-6,46]]">
<div id="fig-loan-waffle" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-loan-waffle-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-waffle" style="flex-basis: 46.9%;justify-content: flex-start;">
<div id="fig-loan-waffle-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Waffle chart of homeownership, with levels rent, mortgage, and own, and waffle chart of loan status, with levels current, fully paid, in grace period, and late. The waffle charts are broken down into a 10 by 10 grid where each square represents 1 percent of the data. The squares are colored proportionally to the variable distributions. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-waffle-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-waffle-1.png" class="lightbox" data-gallery="fig-loan-waffle" title="Figure&nbsp;4.7&nbsp;(a): Homeownership: rent, mortgage, and own"><img src="explore-categorical_files/figure-html/fig-loan-waffle-1.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-loan-waffle" alt="Waffle chart of homeownership, with levels rent, mortgage, and own, and waffle chart of loan status, with levels current, fully paid, in grace period, and late. The waffle charts are broken down into a 10 by 10 grid where each square represents 1 percent of the data. The squares are colored proportionally to the variable distributions. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-waffle-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Homeownership: rent, mortgage, and own
</figcaption></figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 6.1%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-loan-waffle" style="flex-basis: 46.9%;justify-content: flex-start;">
<div id="fig-loan-waffle-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Waffle chart of homeownership, with levels rent, mortgage, and own, and waffle chart of loan status, with levels current, fully paid, in grace period, and late. The waffle charts are broken down into a 10 by 10 grid where each square represents 1 percent of the data. The squares are colored proportionally to the variable distributions. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-loan-waffle-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-loan-waffle-2.png" class="lightbox" data-gallery="fig-loan-waffle" title="Figure&nbsp;4.7&nbsp;(b): Loan status: fully paid, in grace period, and late"><img src="explore-categorical_files/figure-html/fig-loan-waffle-2.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-loan-waffle" alt="Waffle chart of homeownership, with levels rent, mortgage, and own, and waffle chart of loan status, with levels current, fully paid, in grace period, and late. The waffle charts are broken down into a 10 by 10 grid where each square represents 1 percent of the data. The squares are colored proportionally to the variable distributions. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-loan-waffle-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Loan status: fully paid, in grace period, and late
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-loan-waffle-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.7: Waffle charts of homeownership and loan status.
</figcaption></figure>
</div>
</div>
</section><section id="comparing-numerical-data-across-groups" class="level2" data-number="4.6"><h2 data-number="4.6" class="anchored" data-anchor-id="comparing-numerical-data-across-groups">
<span class="header-section-number">4.6</span> Comparing numerical data across groups</h2>
<p>Some of the more interesting investigations can be considered by examining numerical data across groups. In this section we will expand on a few methods we have already seen to make plots for numerical data from multiple groups on the same graph as well as introduce a few new methods for comparing numerical data across groups.</p>
<p>We will revisit the <code>county</code> dataset and compare the median household income for counties that gained population from 2010 to 2017 versus counties that had no gain. While we might like to make a causal connection between income and population growth, remember that these are observational data and so such an interpretation would be, at best, half-baked.</p>
<p>We have data on 3142 counties in the United States. We are missing 2017 population data from 3 of them, and of the remaining 3139 counties, in 1541 the population increased from 2010 to 2017 and in the remaining 1598 the population decreased. <a href="#tbl-countyIncomeSplitByPopGainTable" class="quarto-xref">Table&nbsp;<span>4.6</span></a> shows a sample of four observations from each group.</p>
<div class="cell" data-tbl-pos="H">
<div id="tbl-countyIncomeSplitByPopGainTable" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-countyIncomeSplitByPopGainTable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.6: The median household income from a random sample of four counties with population gain between 2010 to 2017 and another random sample of four counties with no population gain.
</figcaption><div aria-describedby="tbl-countyIncomeSplitByPopGainTable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped table-condensed do-not-create-environment cell caption-top table-sm small">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">State</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">County</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Population change (%)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Gain / No gain</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Median household income</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Arkansas</td>
<td style="text-align: left;">Izard County</td>
<td style="text-align: center; width: 8em;">2.13</td>
<td style="text-align: center; width: 4em;">gain</td>
<td style="text-align: center; width: 8em;">39135</td>
</tr>
<tr class="even">
<td style="text-align: left;">Georgia</td>
<td style="text-align: left;">Jackson County</td>
<td style="text-align: center; width: 8em;">10.17</td>
<td style="text-align: center; width: 4em;">gain</td>
<td style="text-align: center; width: 8em;">57999</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oregon</td>
<td style="text-align: left;">Hood River County</td>
<td style="text-align: center; width: 8em;">3.41</td>
<td style="text-align: center; width: 4em;">gain</td>
<td style="text-align: center; width: 8em;">57269</td>
</tr>
<tr class="even">
<td style="text-align: left;">Texas</td>
<td style="text-align: left;">Montague County</td>
<td style="text-align: center; width: 8em;">0.75</td>
<td style="text-align: center; width: 4em;">gain</td>
<td style="text-align: center; width: 8em;">46592</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kentucky</td>
<td style="text-align: left;">Ballard County</td>
<td style="text-align: center; width: 8em;">-2.62</td>
<td style="text-align: center; width: 4em;">no gain</td>
<td style="text-align: center; width: 8em;">42988</td>
</tr>
<tr class="even">
<td style="text-align: left;">Kentucky</td>
<td style="text-align: left;">Letcher County</td>
<td style="text-align: center; width: 8em;">-5.13</td>
<td style="text-align: center; width: 4em;">no gain</td>
<td style="text-align: center; width: 8em;">30293</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Texas</td>
<td style="text-align: left;">Jim Hogg County</td>
<td style="text-align: center; width: 8em;">-1.12</td>
<td style="text-align: center; width: 4em;">no gain</td>
<td style="text-align: center; width: 8em;">31403</td>
</tr>
<tr class="even">
<td style="text-align: left;">Virginia</td>
<td style="text-align: left;">Richmond County</td>
<td style="text-align: center; width: 8em;">-0.19</td>
<td style="text-align: center; width: 4em;">no gain</td>
<td style="text-align: center; width: 8em;">47341</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Color can be used to split histograms (see <a href="explore-numerical.html#sec-histograms" class="quarto-xref"><span>Section 5.3</span></a> for an introduction to histograms) for numerical variables by levels of a categorical variable. An example of this is shown in <a href="#fig-countyIncomeSplitByPopGain-1" class="quarto-xref">Figure&nbsp;<span>4.8 (a)</span></a>. The <strong>side-by-side box plot</strong> is another traditional tool for comparing across groups. An example is shown in <a href="#fig-countyIncomeSplitByPopGain-2" class="quarto-xref">Figure&nbsp;<span>4.8 (b)</span></a>, where there are two box plots (see <a href="explore-numerical.html#sec-boxplots" class="quarto-xref"><span>Section 5.5</span></a> for an introduction to box plots), one for each group, placed into one plotting window and drawn on the same scale.</p>
<div class="cell">
<div id="fig-countyIncomeSplitByPopGain" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-countyIncomeSplitByPopGain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="fig-countyIncomeSplitByPopGain-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Histograms and side by-side box plots of median household income, where counties are split by whether there was a population gain or not. In both plots, the counties who have had a population gain have a household income distribution with a higher center. Additionally, the histogram (but not the boxp lot) shows that there are more counties who have had a population gain than who have not had a population gain. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-countyIncomeSplitByPopGain-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGain-1.png" class="lightbox" data-gallery="fig-countyIncomeSplitByPopGain" title="Figure&nbsp;4.8&nbsp;(a): Histograms"><img src="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGain-1.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-countyIncomeSplitByPopGain" alt="Histograms and side by-side box plots of median household income, where counties are split by whether there was a population gain or not. In both plots, the counties who have had a population gain have a household income distribution with a higher center. Additionally, the histogram (but not the boxp lot) shows that there are more counties who have had a population gain than who have not had a population gain. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-countyIncomeSplitByPopGain-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Histograms
</figcaption></figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-countyIncomeSplitByPopGain-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Histograms and side by-side box plots of median household income, where counties are split by whether there was a population gain or not. In both plots, the counties who have had a population gain have a household income distribution with a higher center. Additionally, the histogram (but not the boxp lot) shows that there are more counties who have had a population gain than who have not had a population gain. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-countyIncomeSplitByPopGain-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGain-2.png" class="lightbox" data-gallery="fig-countyIncomeSplitByPopGain" title="Figure&nbsp;4.8&nbsp;(b): Side by-side box plots"><img src="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGain-2.png" class="img-fluid figure-img" style="width:90.0%" data-ref-parent="fig-countyIncomeSplitByPopGain" alt="Histograms and side by-side box plots of median household income, where counties are split by whether there was a population gain or not. In both plots, the counties who have had a population gain have a household income distribution with a higher center. Additionally, the histogram (but not the boxp lot) shows that there are more counties who have had a population gain than who have not had a population gain. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-countyIncomeSplitByPopGain-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Side by-side box plots
</figcaption></figure>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-countyIncomeSplitByPopGain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.8: Visualizations of median household income of counties by change in population (gain or loss).
</figcaption></figure>
</div>
</div>
<div class="guidedpractice">
<p>Use the plots in <a href="#fig-countyIncomeSplitByPopGain" class="quarto-xref">Figure&nbsp;<span>4.8</span></a> to compare the incomes for counties across the two groups. What do you notice about the approximate center of each group? What do you notice about the variability between groups? Is the shape relatively consistent between groups? How many <em>prominent</em> modes are there for each group?<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
</div>
<div class="guidedpractice">
<p>What components of each plot in <a href="#fig-countyIncomeSplitByPopGain" class="quarto-xref">Figure&nbsp;<span>4.8</span></a> do you find most useful?<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
</div>
<p>Another useful visualization for comparing numerical data across groups is a <strong>ridge plot</strong>, which combines density plots (see <a href="explore-numerical.html#sec-boxplots" class="quarto-xref"><span>Section 5.5</span></a> for an introduction to density plots) for various groups drawn on the same scale in a single plotting window. <a href="#fig-countyIncomeSplitByPopGainRidge" class="quarto-xref">Figure&nbsp;<span>4.9</span></a> displays a ridge plot for the distribution of median household income in counties, split by whether there was a population gain or not.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-countyIncomeSplitByPopGainRidge" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Ridge plot for median household income, where counties are split by whether there was a population gain or not. The figure shows that the counties who have had a population gain have a household income distribution with a higher center. ">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-countyIncomeSplitByPopGainRidge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGainRidge-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17" title="Figure&nbsp;4.9: Ridge plot for median household income, where counties are split by whether there was a population gain or not."><img src="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGainRidge-1.png" class="img-fluid figure-img" style="width:90.0%" alt="Ridge plot for median household income, where counties are split by whether there was a population gain or not. The figure shows that the counties who have had a population gain have a household income distribution with a higher center. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-countyIncomeSplitByPopGainRidge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.9: Ridge plot for median household income, where counties are split by whether there was a population gain or not.
</figcaption></figure>
</div>
</div>
</div>
<div class="guidedpractice">
<p>What components of the ridge plot in <a href="#fig-countyIncomeSplitByPopGainRidge" class="quarto-xref">Figure&nbsp;<span>4.9</span></a> do you find most useful compared to those in <a href="#fig-countyIncomeSplitByPopGain" class="quarto-xref">Figure&nbsp;<span>4.8</span></a>?<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
</div>
<p>One last visualization technique we’ll highlight for comparing numerical data across groups is <strong>faceting</strong>. In this technique we split (facet) the graphical display of the data across plotting windows based on groups. In <a href="#fig-countyIncomeSplitByPopGainFacetHist-1" class="quarto-xref">Figure&nbsp;<span>4.10 (a)</span></a> displays the same information as <a href="#fig-countyIncomeSplitByPopGain-1" class="quarto-xref">Figure&nbsp;<span>4.8 (a)</span></a>, however here the distributions of median household income for counties with and without population gain are faceted across two plotting windows. We preserve the same scale on the x and y axes for easier comparison. An advantage of this approach is that it extends to splitting the data across levels of two categorical variables, which allows for displaying relationships between three variables. In <a href="#fig-countyIncomeSplitByPopGainFacetHist-2" class="quarto-xref">Figure&nbsp;<span>4.10 (b)</span></a> we have now split the data into four groups using the <code>pop_change</code> and <code>metro</code> variables:</p>
<ul>
<li>top left represents counties that are <em>not</em> in a <code>metro</code>politan area with population gain,</li>
<li>top right represents counties that are in a metropolitan area with population gain,</li>
<li>bottom left represents counties that are <em>not</em> in a metropolitan area without population gain, and finally</li>
<li>bottom right represents counties that are in a metropolitan area without population gain.</li>
</ul>
<div id="fig-countyIncomeSplitByPopGainFacetHist" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-countyIncomeSplitByPopGainFacetHist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row quarto-layout-valign-bottom">
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-countyIncomeSplitByPopGainFacetHist" style="flex-basis: 30.0%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-countyIncomeSplitByPopGainFacetHist">
<div id="fig-countyIncomeSplitByPopGainFacetHist-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Distribution of median income in counties, faceted by whether there was a population gain or not. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-countyIncomeSplitByPopGainFacetHist-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGainFacetHist-1-1.png" class="lightbox" data-gallery="fig-countyIncomeSplitByPopGainFacetHist" title="Figure&nbsp;4.10&nbsp;(a): By population gain."><img src="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGainFacetHist-1-1.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-countyIncomeSplitByPopGainFacetHist" alt="Distribution of median income in counties, faceted by whether there was a population gain or not. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-countyIncomeSplitByPopGainFacetHist-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) By population gain.
</figcaption></figure>
</div>
</div>
</div>
<div class="cell quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-countyIncomeSplitByPopGainFacetHist" style="flex-basis: 70.0%;justify-content: flex-start;">
<div class="cell-output-display quarto-layout-cell-subref" data-ref-parent="fig-countyIncomeSplitByPopGainFacetHist">
<div id="fig-countyIncomeSplitByPopGainFacetHist-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Distribution of median income in counties, faceted by whether there was a population gain and whether the county is in a metropolitan area. Those counties in metropolitan areas have household income distributions which are higher than those which are not in metropolitan araes. ">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-countyIncomeSplitByPopGainFacetHist-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGainFacetHist-2-1.png" class="lightbox" data-gallery="fig-countyIncomeSplitByPopGainFacetHist" title="Figure&nbsp;4.10&nbsp;(b): By both population gain and metropolitan area."><img src="explore-categorical_files/figure-html/fig-countyIncomeSplitByPopGainFacetHist-2-1.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-countyIncomeSplitByPopGainFacetHist" alt="Distribution of median income in counties, faceted by whether there was a population gain and whether the county is in a metropolitan area. Those counties in metropolitan areas have household income distributions which are higher than those which are not in metropolitan araes. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-countyIncomeSplitByPopGainFacetHist-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) By both population gain and metropolitan area.
</figcaption></figure>
</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-countyIncomeSplitByPopGainFacetHist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.10: Distribution of median income in counties using faceted histograms.
</figcaption></figure>
</div>
<p>We can continue building upon this visualization to add one more variable, <code>median_edu</code>, which is the median education level in the county. In <a href="#fig-countyIncomeRidgeMulti" class="quarto-xref">Figure&nbsp;<span>4.11</span></a>, we represent median education level using color, where pink (solid line) represents counties where the median education level is high school diploma, yellow (dashed line) is some college degree, and red (dotted line) is Bachelor’s.</p>
<div class="guidedpractice">
<p>Based on <a href="#fig-countyIncomeRidgeMulti" class="quarto-xref">Figure&nbsp;<span>4.11</span></a>, what can you say about how median household income in counties vary depending on population gain/no gain, metropolitan area/not, and median degree?<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-countyIncomeRidgeMulti" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Distribution of median income in counties using a ridge plot, faceted by whether the county had a population gain or not as well as whether the county is in a metropolitan area and colored by the median education level in the county. Those counties where the median education level is a bachelor's degree have household income distributions that are substantially higher than counties with some college or high school degree only as their education level. ">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-countyIncomeRidgeMulti-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="explore-categorical_files/figure-html/fig-countyIncomeRidgeMulti-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20" title="Figure&nbsp;4.11: Distribution of median income in counties using a ridge plot, faceted by whether the county had a population gain or not as well as whether the county is in a metropolitan area and colored by the median education level in the county."><img src="explore-categorical_files/figure-html/fig-countyIncomeRidgeMulti-1.png" class="img-fluid figure-img" style="width:100.0%" alt="Distribution of median income in counties using a ridge plot, faceted by whether the county had a population gain or not as well as whether the county is in a metropolitan area and colored by the median education level in the county. Those counties where the median education level is a bachelor's degree have household income distributions that are substantially higher than counties with some college or high school degree only as their education level. "></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-countyIncomeRidgeMulti-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.11: Distribution of median income in counties using a ridge plot, faceted by whether the county had a population gain or not as well as whether the county is in a metropolitan area and colored by the median education level in the county.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="sec-chp4-review" class="level2" data-number="4.7"><h2 data-number="4.7" class="anchored" data-anchor-id="sec-chp4-review">
<span class="header-section-number">4.7</span> Chapter review</h2>
<section id="summary" class="level3" data-number="4.7.1"><h3 data-number="4.7.1" class="anchored" data-anchor-id="summary">
<span class="header-section-number">4.7.1</span> Summary</h3>
<p>Fluently working with categorical variables is an important skill for data analysts. In this chapter we have introduced different visualizations and numerical summaries applied to categorical variables. The graphical visualizations are even more descriptive when two variables are presented simultaneously. We presented bar plots, mosaic plots, pie charts, and estimations of conditional proportions.</p>
</section><section id="terms" class="level3" data-number="4.7.2"><h3 data-number="4.7.2" class="anchored" data-anchor-id="terms">
<span class="header-section-number">4.7.2</span> Terms</h3>
<p>The terms introduced in this chapter are presented in <a href="#tbl-terms-chp-04" class="quarto-xref">Table&nbsp;<span>4.7</span></a>. If you’re not sure what some of these terms mean, we recommend you go back in the text and review their definitions. You should be able to easily spot them as <strong>bolded text</strong>.</p>
<div class="cell" data-tbl-pos="H">
<div id="tbl-terms-chp-04" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-pos="H">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-terms-chp-04-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4.7: Terms introduced in this chapter.
</figcaption><div aria-describedby="tbl-terms-chp-04-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table table-striped table-condensed do-not-create-environment cell caption-top table-sm small"><tbody>
<tr class="odd">
<td style="text-align: left; width: 12em;">column proportions</td>
<td style="text-align: left; width: 12em;">faceted plot</td>
<td style="text-align: left; width: 12em;">row totals</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 12em;">column totals</td>
<td style="text-align: left; width: 12em;">filled bar plot</td>
<td style="text-align: left; width: 12em;">side-by-side box plot</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 12em;">conditional proportions</td>
<td style="text-align: left; width: 12em;">mosaic plot</td>
<td style="text-align: left; width: 12em;">stacked bar plot</td>
</tr>
<tr class="even">
<td style="text-align: left; width: 12em;">contingency table</td>
<td style="text-align: left; width: 12em;">ridge plot</td>
<td style="text-align: left; width: 12em;">standardized bar plot</td>
</tr>
<tr class="odd">
<td style="text-align: left; width: 12em;">dodged bar plot</td>
<td style="text-align: left; width: 12em;">row proportions</td>
<td style="text-align: left; width: 12em;"></td>
</tr>
</tbody></table>
</div>
</div>
</figure>
</div>
</div>
</section></section><section id="sec-chp4-exercises" class="level2" data-number="4.8"><h2 data-number="4.8" class="anchored" data-anchor-id="sec-chp4-exercises">
<span class="header-section-number">4.8</span> Exercises</h2>
<p>Answers to odd-numbered exercises can be found in <a href="exercise-solutions.html#sec-exercise-solutions-04" class="quarto-xref">Appendix&nbsp;<span>A.4</span></a>.</p>
<div class="exercises">
<ol type="1">
<li>
<p><strong>Antibiotic use in children.</strong> The bar plot and the pie chart below show the distribution of pre-existing medical conditions of children involved in a study on the optimal duration of antibiotic use in treatment of tracheitis, which is an upper respiratory infection.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="explore-categorical_files/figure-html/unnamed-chunk-30-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="explore-categorical_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>What features are apparent in the bar plot but not in the pie chart?</p></li>
<li><p>What features are apparent in the pie chart but not in the bar plot?</p></li>
<li><p>Which graph would you prefer to use for displaying these categorical data?</p></li>
</ol>
</li>
</ol>
<ol start="2" type="1">
<li>
<p><strong>Views on immigration.</strong> Nine-hundred and ten (910) randomly sampled registered voters from Tampa, FL were asked if they thought workers who have illegally entered the US should be (i) allowed to keep their jobs and apply for US citizenship, (ii) allowed to keep their jobs as temporary guest workers but not allowed to apply for US citizenship, or (iii) lose their jobs and have to leave the country. The results of the survey by political ideology are shown below.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-condensed caption-top table-sm small">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Response</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Conservative</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Liberal</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Moderate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Apply for citizenship</td>
<td style="text-align: right;">57</td>
<td style="text-align: right;">101</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">278</td>
</tr>
<tr class="even">
<td style="text-align: left;">Guest worker</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">113</td>
<td style="text-align: right;">262</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Leave the country</td>
<td style="text-align: right;">179</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">126</td>
<td style="text-align: right;">350</td>
</tr>
<tr class="even">
<td style="text-align: left;">Not sure</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Total</td>
<td style="text-align: right;">372</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">363</td>
<td style="text-align: right;">910</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol type="a">
<li><p>What percent of these Tampa, FL voters identify themselves as conservatives?</p></li>
<li><p>What percent of these Tampa, FL voters are in favor of the citizenship option?</p></li>
<li><p>What percent of these Tampa, FL voters identify themselves as conservatives and are in favor of the citizenship option?</p></li>
<li><p>What percent of these Tampa, FL voters who identify themselves as conservatives are also in favor of the citizenship option? What percent of moderates share this view? What percent of liberals share this view?</p></li>
<li><p>Do political ideology and views on immigration appear to be associated? Explain your reasoning.</p></li>
<li><p>Conjecture other variables that might explain the potential relationship between these two variables.</p></li>
</ol>
</li>
</ol>
<ol start="3" type="1">
<li>
<p><strong>Black Lives Matter.</strong> A Washington Post-Schar School poll conducted in the United States in June 2020, among a random national sample of 1,006 adults, asked respondents whether they support or oppose protests following George Floyd’s killing that have taken place in cities across the US. The survey also collected information on the age of the respondents. <span class="citation" data-cites="survey:blmWaPoScar:2020">(<a href="references.html#ref-survey:blmWaPoScar:2020" role="doc-biblioref">Washington Post 2020</a>)</span> The results are summarized in the stacked bar plot below.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="explore-categorical_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="explore-categorical_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Based on the stacked bar plot, do views on the protests and age appear to be associated? Explain your reasoning.</p></li>
<li><p>Conjecture other possible variables that might explain the potential association between these two variables.</p></li>
</ol>
</li>
</ol>
<ol start="4" type="1">
<li>
<p><strong>Raise taxes.</strong> A random sample of registered voters nationally were asked whether they think it’s better to raise taxes on the rich or raise taxes on the poor. The survey also collected information on the political party affiliation of the respondents. <span class="citation" data-cites="survey:raiseTaxes:2015">(<a href="references.html#ref-survey:raiseTaxes:2015" role="doc-biblioref">Polling 2015</a>)</span></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="explore-categorical_files/figure-html/unnamed-chunk-33-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="explore-categorical_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Based on the stacked bar plot shown above, do views on raising taxes and political affiliation appear to be associated? Explain your reasoning.</p></li>
<li><p>Conjecture other possible variables that might explain the potential association between these two variables.</p></li>
</ol>
</li>
</ol>
<ol start="5" type="1">
<li>
<p><strong>Heart transplant data display.</strong> The Stanford University Heart Transplant Study was conducted to determine whether an experimental heart transplant program increased lifespan. Each patient entering the program was officially designated a heart transplant candidate, meaning that they were gravely ill and might benefit from a new heart. Patients were randomly assigned into treatment and control groups. Patients in the treatment group received a transplant, and those in the control group did not. The visualizations below display two different versions of the study results.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> <span class="citation" data-cites="Turnbull+Brown+Hu:1974">(<a href="references.html#ref-Turnbull+Brown+Hu:1974" role="doc-biblioref">Turnbull, Brown, and Hu 1974</a>)</span></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="explore-categorical_files/figure-html/unnamed-chunk-34-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24"><img src="explore-categorical_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Provide one aspect of the two group comparison that is easier to see from the stacked bar plot (left)?</p></li>
<li><p>Provide one aspect of the two group comparison that is easeir to see from the standardized bar plot (right)?</p></li>
<li><p>For the Heart Transplant Study which of those aspects would be more important to display? That is, which bar plot would be better as a data visualization?</p></li>
</ol>
</li>
</ol>
<ol start="6" type="1">
<li>
<p><strong>Shipping holiday gifts data display.</strong> A local news survey asked 500 randomly sampled Los Angeles residents which shipping carrier they prefer to use for shipping holiday gifts. The bar plots below show the distribution of responses by age group as well as distribution of responses by shipping method.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="explore-categorical_files/figure-html/unnamed-chunk-35-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25"><img src="explore-categorical_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Which graph (top or bottom) would you use to understand the shipping choices of people of different ages? Explain.</p></li>
<li><p>Which graph (top or bottom) would you use to understand the age distribution across different types of shipping choices? Explain.</p></li>
<li><p>A new shipping company would like to market to people over the age of 55. Who will be their biggest competitor? Explain.</p></li>
<li><p>FedEx would like to reach out to grow their market share so as to balance the age demographics of FedEx users. To what age group should FedEx market?</p></li>
</ol>
</li>
</ol>
<ol start="7" type="1">
<li>
<p><strong>Meat consumption and life expectancy.</strong> In data collected for <span class="citation" data-cites="You:2022">You et al. (<a href="references.html#ref-You:2022" role="doc-biblioref">2022</a>)</span>, total meat intake is associated with life expectancy (at birth) in 175 countries. Meat intake is measured in kg per capita per year (averaged over 2011 to 2013). The two ridge plots show an association between income and meat consumption (higher income countries tend to eat more meat) and an association between income and life expectancy (higher income countries have higher life expectancy).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><a href="explore-categorical_files/figure-html/unnamed-chunk-36-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-26"><img src="explore-categorical_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Do the graphs above demonstrate that meat consumption and life expectancy are associated? That is, can you tell if countries with low meat consumption have low life expectancy? Explain.</p></li>
<li><p>Let’s assume that you had a plot comparing meat consumption and life expectancy, and they <em>do</em> seem associated. Your friend says that the plot shows that high meat consumption leads to a longer life. You correctly say, no, we can’t tell if there is a causal realtionship because the relationship is confounded by income level. Explain what you mean.</p></li>
<li><p>How can you investigate the relationship between meat consumption and life expectancy in the presence of confounding variables (like income)?</p></li>
</ol>
</li>
</ol>
<ol start="8" type="1">
<li>
<p><strong>Florence Nightingale.</strong> Florence Nightingale was a nurse in the Crimean War and an early statistician. In her notes, she opined, “In comparing the deaths of one hospital with those of another, any statistics are justly considered absolutely valueless which do not give the ages, the sexes, and the diseases of all the cases.” <span class="citation" data-cites="nightingale:1859">(<a href="references.html#ref-nightingale:1859" role="doc-biblioref">Nightingale 1859</a>)</span></p>
<ol type="a">
<li><p>Nightingale describes three confounding variables to consider when comparing death rates across hospitals. What are they? Describe what makes each variable potentially confounding.</p></li>
<li><p>Provide two additional potential confounding variables for this situation. Check to make sure that the variables are associated with both the explanatory variable (hospital) and the response variable (death).</p></li>
<li><p>Why does Nightingale say that the statistics are “valueless” if given without being broken down by age, sex, and disease? Explain.</p></li>
</ol>
</li>
</ol>
<ol start="9" type="1">
<li>
<p><strong>On-time arrivals.</strong> Consider all of the flights out of New York City in 2013 that flew into Puerto Rico (BQN), Los Angeles (LAX), or San Francisco (SFO) on the following two airlines: JetBlue (B6) or United Airlines (UA). Below are the tabulated counts for the number of flights <code>delayed</code> and <code>on time</code> for each airline into each city.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-striped table-condensed caption-top table-sm small">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">dest</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">carrier</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">status</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">BQN</td>
<td style="text-align: left;">B6</td>
<td style="text-align: left;">delayed</td>
<td style="text-align: right;">271</td>
</tr>
<tr class="even">
<td style="text-align: left;">BQN</td>
<td style="text-align: left;">B6</td>
<td style="text-align: left;">on time</td>
<td style="text-align: right;">322</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BQN</td>
<td style="text-align: left;">UA</td>
<td style="text-align: left;">delayed</td>
<td style="text-align: right;">144</td>
</tr>
<tr class="even">
<td style="text-align: left;">BQN</td>
<td style="text-align: left;">UA</td>
<td style="text-align: left;">on time</td>
<td style="text-align: right;">151</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LAX</td>
<td style="text-align: left;">B6</td>
<td style="text-align: left;">delayed</td>
<td style="text-align: right;">670</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAX</td>
<td style="text-align: left;">B6</td>
<td style="text-align: left;">on time</td>
<td style="text-align: right;">999</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LAX</td>
<td style="text-align: left;">UA</td>
<td style="text-align: left;">delayed</td>
<td style="text-align: right;">2368</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAX</td>
<td style="text-align: left;">UA</td>
<td style="text-align: left;">on time</td>
<td style="text-align: right;">3402</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SFO</td>
<td style="text-align: left;">B6</td>
<td style="text-align: left;">delayed</td>
<td style="text-align: right;">405</td>
</tr>
<tr class="even">
<td style="text-align: left;">SFO</td>
<td style="text-align: left;">B6</td>
<td style="text-align: left;">on time</td>
<td style="text-align: right;">615</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SFO</td>
<td style="text-align: left;">UA</td>
<td style="text-align: left;">delayed</td>
<td style="text-align: right;">2694</td>
</tr>
<tr class="even">
<td style="text-align: left;">SFO</td>
<td style="text-align: left;">UA</td>
<td style="text-align: left;">on time</td>
<td style="text-align: right;">4034</td>
</tr>
</tbody>
</table>
</div>
</div>
<ol type="a">
<li><p>What percent of all JetBlue flights were delayed? What percent of all United Airlines flights were delayed? (Note, the overall delay proportions are typically what would be reported and associated with an airline.)</p></li>
<li><p>For each of the three airports, find the percent of delayed flights for each of JetBlue and United (you should have 6 numbers).</p></li>
<li><p>United has a higher proportion of delayed flights for each of the three cities, yet JetBlue has a higher proportion of delayed flights overall. Explain, using the data counts provided, how the seeming paradox could happen.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p></li>
</ol>
</li>
<li>
<p><strong>US House of Representatives.</strong> The US House of Representatives is dominated by two political parties: Democrats and Republicans. Democrats are thought to be the more liberal party and Republicans are considered to be the more conservative party. However, within each party there is an internal spectrum of liberal to conservative. For example, conservative Democrats and liberal Republicans would be labeled moderate. Consider an election where the only change in membership is that the most conservative Democrats are replaced by a set of liberal Republicans who are more liberal than the incumbent Republicans but more conservative than the Democrats they replaced.</p>
<ol type="a">
<li><p>After the election, is the Democratic wing of the House more conservative or more liberal? Explain.</p></li>
<li><p>After the election, is the Republican wing of the House more conservative or more liberal? Explain.</p></li>
<li><p>After the election, is the overall House membership more conservative or more liberal? Explain.</p></li>
<li><p>In what settings would you report the outcome of the change in House membership to be more conservative? And in what settings would you report the outcome of the change in House membership to be more liberal?<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></p></li>
</ol>
</li>
</ol>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-nightingale:1859" class="csl-entry" role="listitem">
Nightingale, Florence. 1859. <em>Notes on Nursing: What It Is, and What It Is Not</em>. Harrison &amp; Sons.
</div>
<div id="ref-survey:raiseTaxes:2015" class="csl-entry" role="listitem">
Polling, Public Policy. 2015. <span>“Americans on College Degrees, Classic Literature, the Seasons, and More, Data Collected Feb 20-22, 2015.”</span> <a href="http://www.openintro.org/redirect.php?go=textbook-PPP_30215">http://www.openintro.org/redirect.php?go=textbook-PPP_30215</a>.
</div>
<div id="ref-Turnbull+Brown+Hu:1974" class="csl-entry" role="listitem">
Turnbull, B., B. Brown, and M. Hu. 1974. <span>“Survivorship of Heart Transplant Data.”</span> <em>Journal of the American Statistical Association</em> 69: 74–80. <a href="https://doi.org/10.1080/01621459.1974.10480130">https://doi.org/10.1080/01621459.1974.10480130</a>.
</div>
<div id="ref-survey:blmWaPoScar:2020" class="csl-entry" role="listitem">
Washington Post. 2020. <span>“Washington Post-Schar School National Poll, Data Collected June 2-7, 2020.”</span> <a href="http://www.openintro.org/redirect.php?go=exercise-wapo-2020-blm-poll">http://www.openintro.org/redirect.php?go=exercise-wapo-2020-blm-poll</a>.
</div>
<div id="ref-You:2022" class="csl-entry" role="listitem">
You, W., R. Henneberg, A. Saniotis, Y. Ge, and M. Henneberg. 2022. <span>“Total Meat Intake Is Associated with Life Expectancy: A Cross-Sectional Data Analysis of 175 Contemporary Populations.”</span> <em>International Journal of General Medicine</em> 15: 1833–51.
</div>
</div>
</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>0.451 represents the proportion of individual applicants who have a mortgage. 0.802 represents the fraction of applicants with mortgages who applied as individuals.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>0.122 represents the fraction of joint borrowers who own their home. 0.135 represents the home-owning borrowers who had a joint application for the loan.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Answers may vary a little. The counties with population gains tend to have higher income (median of about $45,000) versus counties without a gain (median of about $40,000). The variability is also slightly larger for the population gain group. This is evident in the IQR, which is about 50% bigger in the <em>gain</em> group. Both distributions show slight to moderate right skew and are unimodal. The box plots indicate there are many observations far above the median in each group, though we should anticipate that many observations will fall beyond the whiskers when examining any dataset that contain more than a few hundred data points.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Answers will vary. The side-by-side box plots are especially useful for comparing centers and spreads, while the hollow histograms are more useful for seeing distribution shape, skew, modes, and potential anomalies.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>The ridge plot give us a better sense of the shape, and especially modality, of the data.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Regardless of the location (metropolitan or not) or change in population, it seems like there is an increase in median household income from individuals with only a HS diploma, to individuals with some college, to individuals with a Bachelor’s degree.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>The <a href="http://openintrostat.github.io/openintro/reference/antibiotics.html"><code>antibiotics</code></a> data used in this exercise can be found in the <a href="http://openintrostat.github.io/openintro"><strong>openintro</strong></a> R package.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>The <a href="http://openintrostat.github.io/openintro/reference/immigration.html"><code>immigration</code></a> data used in this exercise can be found in the <a href="http://openintrostat.github.io/openintro"><strong>openintro</strong></a> R package.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>The <a href="http://openintrostat.github.io/openintro/reference/heart_transplant.html"><code>heart_transplant</code></a> data used in this exercise can be found in the <a href="http://openintrostat.github.io/openintro"><strong>openintro</strong></a> R package.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>The <code>flights</code> data used in this exercise can be found in the <a href="https://github.com/tidyverse/nycflights13"><strong>nycflights13</strong></a> R package.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>The conundrum is known as Simpson’s Paradox and is explored in <a href="data-applications.html" class="quarto-xref"><span>Chapter 3</span></a>.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>The conundrum is known as Simpson’s Paradox and is explored in <a href="data-applications.html" class="quarto-xref"><span>Chapter 3</span></a>.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./exploratory-data-analysis.html" class="pagination-link" aria-label="Exploratory data analysis">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Exploratory data analysis</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./explore-numerical.html" class="pagination-link" aria-label="Exploring numerical data">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exploring numerical data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>This is IMS2e!</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/openintrostat/ims/edit/main/explore-categorical.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/openintrostat/ims/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


</body></html>